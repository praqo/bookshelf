(function(exports){const events=function(){let events={};function on(eventName,fn){events[eventName]=events[eventName]||[];events[eventName].push(fn)}function off(eventName,fn){if(events[eventName]){for(let i=0;i<events[eventName].length;i++){if(events[eventName][i]===fn){events[eventName].splice(i,1);break}}}}function emit(eventName,data){if(events[eventName]){events[eventName].forEach(fn=>{fn(data)})}}return{on:on,off:off,emit:emit}}();const userDataFunctions=function(){let userData={booksData:[]};if(!localStorage.hasOwnProperty("bookshelfApp")){updateLocalStorage()}else{userData=JSON.parse(localStorage.getItem("bookshelf"))}function updateLocalStorage(){localStorage.setItem("bookshelfApp",JSON.stringify(userData));events.emit("userDataChange",userData)}function addBook(bookInfo){alert(bookInfo)}function removeBook(bookId){const newBooksData=userData.booksdata.filter(item=>item.id!==bookId);userData={...userData,booksData:newBooksData};updateLocalStorage()}events.on("addBook",addBook);events.on("removeBook",removeBook)}();const search=function(){if(document.querySelector(".js-book-search")){const bookSearchForm=document.querySelector(".js-book-search");const bookSearchInput=document.querySelector("#bookSearch");const apiUrl="http://openlibrary.org/search.json?q=";async function fetchData(url){try{const response=await fetch(url);const data=await response.json();console.log(data);events.emit("searchDataChange",data)}catch(error){console.error(error)}}function searchBooks(e){e.preventDefault();const searchValue=bookSearchInput.value.replace(/ /g,"+");const data=fetchData(apiUrl+searchValue)}bookSearchForm.addEventListener("submit",searchBooks)}}();const results=function(){if(document.querySelector(".js-search-results")){const searchResultsContainer=document.querySelector(".js-search-results");function emitAddBook(e){console.log(e.currentTarget.dataset.bookid);events.emit("addBook",e.currentTarget.dataset.bookid)}function populateData(data){let htmlToAppend;data.docs.forEach(item=>{htmlToAppend+=`<h3 class='book-title' data-bookid=${item.key}>${item.title}</h3>`});searchResultsContainer.innerHTML=htmlToAppend;document.querySelectorAll(".book-title").forEach(item=>item.addEventListener("click",emitAddBook))}events.on("searchDataChange",populateData)}}()})(typeof window=="undefined"?window={}:window);